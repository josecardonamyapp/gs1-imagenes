<div class="container-fluid py-4">
  <div class="row g-4">
    @for (product of products; track product.producName) {
    <div class="col-12 col-sm-6 col-md-3">
      <div class="card product-card  h-100 shadow border-0 rounded-3 bg-white text-start">

        <!-- <div class="carousel-counter text-center mb-4"> -->
        <div class="card-header text-center ">
          <span class="badge bg-light text-dark px-2 py-1 rounded">
            <h3>{{ product.currentIndex+1 }} / {{ product.images.length }} imágenes</h3>
          </span>
        </div>

        <div class="carousel-container position-relative">
          <button mat-icon-button class="carousel-btn left" (click)="previousImage(product)">
            <mat-icon>chevron_left</mat-icon>
          </button>

          <!-- <h3>{{ product.images.length }}</h3> -->
          <ng-container *ngIf="product.images?.length > 0; else noImage">
            <img [src]="product.images[product.currentIndex]?.uniformresourceidentifier" alt="{{ product.producName }}"
              loading="lazy" class="card-img-top p-3 mx-auto d-block mb-3"
              style="height: 180px; object-fit: contain; border-bottom: 1px solid #eee;" />
          </ng-container>

          <ng-template #noImage>
            <div class="placeholder-img">
              <mat-icon>image_not_supported</mat-icon>
            </div>
          </ng-template>

          <button mat-icon-button class="carousel-btn right" (click)="nextImage(product)">
            <mat-icon>chevron_right</mat-icon>
          </button>
        </div>

        <div class="card-body d-flex flex-column pb-3">
          <div class="mb-1 text-muted" style="font-size: 0.85rem;">
            GTIN: {{ product.gtin }}
          </div>

          <h4 class="card-title fw-semibold text-dark fs-5 mb-3 text-capitalize">
            {{ product.producName }}
          </h4>

          <div class="mt-auto">
            <button (click)="goToDetail(product.gtin)"  matButton="filled">
              MÁS INFO
            </button>
          </div>
        </div>
      </div>
    </div>
    }
  </div>
</div>